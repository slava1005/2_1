### Домашнее задание к занятию «Хранение в K8s. Часть 1»
#### Задание 1
##### Что нужно сделать

Создать Deployment приложения, состоящего из двух контейнеров и обменивающихся данными.

1. Создать Deployment приложения, состоящего из контейнеров busybox и multitool.
2. Сделать так, чтобы busybox писал каждые пять секунд в некий файл в общей директории.
3. Обеспечить возможность чтения файла контейнером multitool.
4. Продемонстрировать, что multitool может читать файл, который периодоически обновляется.
5. Предоставить манифесты Deployment в решении, а также скриншоты или вывод команды из п. 4.
#### Задание 2
##### Что нужно сделать

Создать DaemonSet приложения, которое может прочитать логи ноды.

1. Создать DaemonSet приложения, состоящего из multitool.
2. Обеспечить возможность чтения файла /var/log/syslog кластера MicroK8S.
3. Продемонстрировать возможность чтения файла изнутри пода.
4. Предоставить манифесты Deployment, а также скриншоты или вывод команды из п. 2.

#### Выполнение задания 1
Пишем Deployment приложения, состоящего из контейнеров busybox и multitool.
Чтобы busybox писал данные каждые пять секунд в некий файл в общей директории, будем использовать команду создающую общую директорию и общий файл. 
Далее в созданный файл каждые пять секунд будет записываться сообщение "Test message".

Для обеспечения чтения файла контейнером multitool, в манифесте Deployment укажем общую с контейнером busybox директорию, читать файл будем с помощью команды tail.

Проверим, запишутся ли данные в файл контейнером busybox и будут ли они доступны контейнеру multitool.

Сделать это можно как из самих контейнеров, так и посмотрев их логи.

Проверю данные из контейнеров:

![img1_1](https://github.com/user-attachments/assets/c8a4feac-a97e-4c90-9296-07909c413d6d)

![img1_2](https://github.com/user-attachments/assets/419019f2-f9fc-4333-9e4e-7935f05b06cf)

Из обоих контейнеров пода файл виден, доступен, в него действительно записываются данные каждые 5 секунд.

Также можно проверить, читает ли контейнер multitool файл success.txt, посмотрев его лог:

![img1_3](https://github.com/user-attachments/assets/1852aef7-0466-4203-ad82-65a59cdd2b21)

Видно, что контейнер multitool читает файл.

Ссылка на манифест Deployment - https://github.com/slava1005/2_1/blob/main/manifest/deployment.yaml

#### Выполнение задания 2
Пишем манифест DaemonSet приложения, состоящего из multitool. Применяем манифест и проверяем DaemonSet и Pod:

![img1_4](https://github.com/user-attachments/assets/843a91ac-e034-4184-855a-b00326742c95)

Для обеспечения возможность чтения файла /var/log/syslog кластера MicroK8S внутри контейнера будем использовать параметр subPath, 
который позволит монтировать не всю директорию /var/log c машины - кластера MicroK8S, а именно один файл syslog. Также буду использовать параметр readOnly, 
чтобы избежать проблем с доступом к файл syslog, находящемуся на машине - кластере MicroK8S.

Проверим возможность чтения файла изнутри пода:

![img1_5](https://github.com/user-attachments/assets/bd837b73-5757-4ef7-9c4a-5113db0f817a)

Мы видим, что в контейнере пода присутствует директория /nodes-logs/ с файлом syslog, который примонтирован из машины - кластера MicroK8S.

Ссылка на манифест DaemonSet - https://github.com/slava1005/2_1/blob/main/manifest/daemonset.yaml
